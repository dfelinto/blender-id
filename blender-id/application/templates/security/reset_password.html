{% extends 'layout.html' %}

{% from "security/_macros.html" import render_field_with_errors, render_field_with_errors_without_label, render_field %}
{% include "security/_messages.html" %}

{% block body %}

<div class="container-fluid">
  <div class="row" id="featured">
    <div class="container">
      <div class="col-md-12">
          <div class="login"
            style="background: url('{{ url_for('static', filename='assets/img/placeholder_background.jpg') }}') center;">
              <div class="row">
                  <div class="panel">
                    <h1>Reset Password</h1>
                    <h2>Let's start over.</h2>
                    <div class="row login-container">
                      <div class="col-md-12">

						<form action="{{ url_for_security('reset_password', token=reset_password_token) }}" method="POST" name="reset_password_form">
						  {{ reset_password_form.hidden_tag() }}

                          <label class="control-label btn-block" for="userid">
                            <div class="input-group input-group-lg">
                              <span class="input-group-addon"><i class="fa fa-envelope-o"></i></span>
							  {{ render_field_with_errors_without_label(reset_password_form.password, class='form-control', placeholder="Your new password", onkeyup="password_match();") }}
                            </div>
                          </label>
                          <label class="control-label btn-block" for="userid">
                            <div class="input-group input-group-lg">
                              <span class="input-group-addon"><div id="password_match"></div></span>
							  {{ render_field_with_errors_without_label(reset_password_form.password_confirm, class='form-control', placeholder="Type it again just to be sure", onkeyup="password_match();") }}
    							
                            </div>
                          </label>

                         <!-- Button -->
                          <div class="control-group">
                            <label class="control-label" for="signin"></label>
                            <div class="controls">
                              {{ render_field(reset_password_form.submit, class='btn btn-default btn-lg btn-xl centered') }}
                            </div>
                            <hr class="light" />
                          <a href="{{url_for_security('login')}}"><i class="fa fa-rotate-left"></i></a>
                          </div>

                          <!-- <a class="btn btn-default pull-right" href="{{url_for_security('login')}}">Back</a> -->
                        </form>
                      </div>
                    </div>
                </div>
              </div>
          </div>
      </div>
    </div>
  </div>
</div>
<script>
function password_match() {
    var pwd = $("#password").val();
    var confirm_pwd = $("#password_confirm").val();

    if (pwd != confirm_pwd)
        $("#password_match").html("<i class='fa fa-times'></i>");
    else
        $("#password_match").html("<i class='fa fa-check success'></i>");
}

$(document).ready(function () {
   $("#password_confirm").onkeypress(password_match);
});
</script>
{% endblock %}