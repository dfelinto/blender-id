{% extends 'layout.html' %}
{% from "security/_macros.html" import render_field_with_errors_without_label, render_field %}

{% block body %}

<div class="container-fluid">
  <div class="row" id="featured">
    <div class="container">
      <div class="col-md-12">
          <div class="login"
            style="background: url('{{ url_for('static', filename='assets/img/placeholder_background.jpg') }}') center;">
              <div class="row">
                  <div class="panel">
                    <h1>Change Password</h1>
                    <h2>Because change is good.</h2>
                    <div class="row login-container">
                      <div class="col-md-12">

						<form action="{{ url_for_security('change_password') }}" method="POST" name="change_password_form">
						  {{ change_password_form.hidden_tag() }}

                          <label class="control-label btn-block" for="userid">
                            <div class="input-group input-group-lg">
                              <span class="input-group-addon"><i class="fa fa-lock"></i></span>
								  {{ render_field_with_errors_without_label(change_password_form.password, class='form-control', placeholder="Current Password") }}
                            </div>
                           </label>

                          <label class="control-label btn-block" for="userid">
                            <div class="input-group input-group-lg">
                              <span class="input-group-addon"><i class="fa fa-lock"></i></span>
						  		{{ render_field_with_errors_without_label(change_password_form.new_password, class='form-control', placeholder="New Password", onkeyup="password_match();") }}
                            </div>
                           </label>

                          <label class="control-label btn-block" for="userid">
                            <div class="input-group input-group-lg">
                              <span class="input-group-addon"><div id="password_match"><i class="fa fa-lock"></i></div></span>
						  		{{ render_field_with_errors_without_label(change_password_form.new_password_confirm, class='form-control', placeholder="Confirm Password", onkeyup="password_match();") }}
                            </div>
                           </label>

                         <!-- Button -->
                          <div class="control-group">
                            <label class="control-label" for="signin"></label>
                            <div class="controls">
                              {{ render_field(change_password_form.submit, class='btn btn-default btn-lg btn-xl centered') }}
                            </div>
                            <hr class="light" />
                          	<a href="/settings"><i class="fa fa-level-down fa-rotate-90"></i></a>
                          </div>

                        </form>
                      </div>
                    </div>
                </div>
              </div>
          </div>
      </div>
    </div>
  </div>
</div>
<script>
function password_match() {
    var pwd = $("#new_password").val();
    var confirm_pwd = $("#new_password_confirm").val();

    if (pwd != confirm_pwd)
        $("#password_match").html("<i class='fa fa-times'></i>");
    else
        $("#password_match").html("<i class='fa fa-check success'></i>");
}

$(document).ready(function () {
   $("#password_confirm").onkeypress(password_match);
});
</script>
{% endblock %}
